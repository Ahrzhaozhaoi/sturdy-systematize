<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JavaScript运行机制</title>
</head>
<body>
<script type="text/javascript">
  /**
   *js单线程：在同一时间只能做一件事情
   *
   * 为什么是单线程：其用途(与用户互动，操作DOM)决定
   *    否则会带来很复杂的同步问题
   *    假设同一时刻，一个线程某DOM节点添加内容，
   *   另一线程删除该节点，浏览器该以哪个线程为准
   *
   * 任务队列（实现单线程）：
   *    同步任务在主线程上先排队执行，
   *    异步任务在任务队列挂起
   */
  // console.log(1);
  // setTimeout(function () {
  //     console.log(2);
  // }, 0);
  // console.log(3);
  // console.log(4);
  //
  // console.log('A');
  // setTimeout(function () {
  //     console.log('B');
  // }, 0);
  // while (1) {
  //  同步的死循环
  // }
  //
  for (var i = 0; i < 4; i++) {
    setTimeout(function () {
      console.log(i);
    }, 1000);
  }
  //4个4
  /**
   *for循环是同步任务
   *
   *
   * 异步队列执行的时间：
   *    浏览器有个timer模块，异步函数体先放入timer模块中
   *    到时间后（0其实是4ms），timer模块把异步函数体扔到异步队列中
   * 事件循环（event loop）：
   *    运行栈：执行同步任务，同步任务执行完后再去异步任务队列中取出函数体，并执行异步任务
   *    什么时候开启异步任务：setTimeout、setInterval
   *                        DOM事件
   *                        ES6中Promise
   */

</script>
</body>
</html>
